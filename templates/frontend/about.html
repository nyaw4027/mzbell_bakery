{% extends "base.html" %}
{% load static %}
{% load custom_filters %}

{% block title %}About Us - MzBell's Bakery{% endblock %}

{% block styles %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
<link href="{% static 'css/about.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="position-relative z-1">

  <!-- Hero Section -->
  <section class="hero-section py-5 text-center bg-light">
    <div class="container">
      <h1 class="display-4 fw-bold" data-aos="fade-up">About MzBell's Bakery</h1>
      <p class="lead" data-aos="fade-up" data-aos-delay="200">Crafting sweet memories one masterpiece at a time.</p>
      <div class="mt-4" data-aos="fade-up" data-aos-delay="400">
        <a href="#story" class="btn btn-primary me-2"><i class="fas fa-book-open me-1"></i>Our Story</a>
        <a href="#team" class="btn btn-outline-primary"><i class="fas fa-users me-1"></i>Meet the Team</a>
      </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="py-5 bg-white">
    <div class="container">
      <div class="row text-center">
        {% for stat in stats %}
        <div class="col-6 col-md-3 mb-4" data-aos="zoom-in" data-aos-delay="{{ forloop.counter|add_mul:'1,100' }}">
          <h2 class="fw-bold display-5 stats-number" data-target="{{ stat.value }}">0</h2>
          <p class="text-muted">{{ stat.label }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Story Section -->
  <section id="story" class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-4" data-aos="fade-up">Our Sweet Journey</h2>
      <p class="text-center mb-5" data-aos="fade-up" data-aos-delay="100">
        Every great bakery has a story. Ours begins with passion, tradition, and love for creating joy through flavor.
      </p>
      <div class="timeline">
        {% for item in timeline %}
        <div class="timeline-item mb-5" data-aos="fade-{{ forloop.counter|divisibleby:2|yesno:'left,right' }}" data-aos-delay="{{ forloop.counter|add_mul:'2,100' }}">
          <h5 class="fw-bold">{{ item.title }}</h5>
          <p>{{ item.text }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Core Values Section -->
  <section class="py-5 bg-white">
    <div class="container">
      <h2 class="text-center" data-aos="fade-up">Our Core Values</h2>
      <div class="row mt-4">
        {% for value in values %}
        <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add_mul:'1,100' }}">
          <div class="p-4 shadow-sm rounded bg-white text-center h-100">
            <i class="fas {{ value.icon }} fa-2x mb-3 text-primary"></i>
            <h5 class="fw-bold">{{ value.title }}</h5>
            <p>{{ value.text }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Team Section -->
  <section id="team" class="py-5 bg-light">
    <div class="container">
      <h2 class="text-center mb-4" data-aos="fade-up">Meet the Team</h2>
      <div class="row">
        {% for member in team_members %}
        <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add_mul:'1,100' }}">
          <div class="card h-100 text-center p-3">
            {% if member.image %}
            <img src="{{ member.image.url }}" class="rounded-circle mx-auto mb-3" style="width: 100px; height: 100px; object-fit: cover;" alt="{{ member.name }}">
            {% else %}
            <div class="bg-secondary text-white rounded-circle d-inline-block mb-3 p-3 fs-4">{{ member.name|first|upper }}</div>
            {% endif %}
            <h5>{{ member.name }}</h5>
            <p class="text-muted">{{ member.role }}</p>
            {% if member.bio %}
            <p class="small">{{ member.bio|truncatewords:20 }}</p>
            {% endif %}
            <div class="mt-2">
              {% if member.twitter %}<a href="{{ member.twitter }}" class="me-2 text-dark"><i class="fab fa-twitter"></i></a>{% endif %}
              {% if member.facebook %}<a href="{{ member.facebook }}" class="me-2 text-dark"><i class="fab fa-facebook-f"></i></a>{% endif %}
              {% if member.instagram %}<a href="{{ member.instagram }}" class="me-2 text-dark"><i class="fab fa-instagram"></i></a>{% endif %}
              {% if member.linkedin %}<a href="{{ member.linkedin }}" class="me-2 text-dark"><i class="fab fa-linkedin-in"></i></a>{% endif %}
            </div>
          </div>
        </div>
        {% empty %}
        <div class="col-12 text-center">No team members available yet.</div>
        {% endfor %}
      </div>
    </div>
  </section>
<!-- Testimonials Section -->
<section class="py-5 bg-white">
  <div class="container">
    <h2 class="text-center mb-5" data-aos="fade-up">What Our Customers Say</h2>
    <div class="row">
      {% for t in testimonials %}
      <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="{{ forloop.counter|add_mul:'1,100' }}">
        <div class="card h-100 text-center p-4 shadow-sm">
         {% if t.image %}
  <img src="{{ t.image.url }}" class="rounded-circle mx-auto mb-3" alt="{{ t.name }}" width="80" height="80" style="object-fit: cover;">
{% endif %}

          <blockquote class="blockquote mb-0">
            <p class="mb-3">“{{ t.quote }}”</p>
            <footer class="blockquote-footer">{{ t.name }}</footer>
          </blockquote>
        </div>
      </div>
      {% empty %}
      <div class="col-12 text-center">No testimonials yet. Be the first to share your sweet story!</div>
      {% endfor %}
    </div>
  </div>
</section>


  <!-- CTA Section -->
  <section class="py-5 text-center text-white bg-primary">
    <div class="container">
      <h2 class="fw-bold mb-3" data-aos="fade-up">Ready to Create Something Sweet?</h2>
      <p class="lead mb-4" data-aos="fade-up" data-aos-delay="100">Let us make your special moments unforgettable.</p>
      <a href="{% url 'frontend:product_list' %}" class="btn btn-light me-2"><i class="fas fa-store me-1"></i> Shop Now</a>
      <a href="{% url 'frontend:contact' %}" class="btn btn-outline-light"><i class="fas fa-envelope me-1"></i> Contact Us</a>
    </div>
  </section>

</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script>
  AOS.init({ duration: 800, easing: 'ease-in-out', once: true });

  function animateCounters() {
    document.querySelectorAll('.stats-number').forEach(counter => {
      const target = +counter.dataset.target;
      let count = 0;
      const step = target / 60;
      function update() {
        if (count < target) {
          count += step;
          counter.innerText = Math.floor(count) + '+';
          requestAnimationFrame(update);
        } else {
          counter.innerText = target + '+';
        }
      }
      update();
    });
  }

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        animateCounters();
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.stats-number').forEach(el => observer.observe(el));
</script>
{% endblock %}
